#include <math_my.h>



//-------------------------------------------------------------------------------------------------------------------
// 函 数 名:           Angle_Translate
// 函数功能 :           将角度转变为-180~180之间
// 输    入:          弧度
// 输    出:          角度
//-------------------------------------------------------------------------------------------------------------------
float translateAngle(float angle)
{
	while (angle > ANGLE_MAX)					//判断目标角度是否在允许角度范围
		angle -= 360.0f;
	while (angle < ANGLE_MIN)
		angle += 360.0f;
	return angle;
}



//-------------------------------------------------------------------------------------------------------------------
// 函 数 名:           Tan
// 函数功能 :           正切三角函数
// 输    入:          角度值
// 输    出:          计算值
//-------------------------------------------------------------------------------------------------------------------
float tan(float angle)
{
	return sin(angle) / cos(angle);
}

//-------------------------------------------------------------------------------------------------------------------
// 函 数 名:           ATan1
// 函数功能 :           反正切三角函数
// 输    入:          数值
// 输    出:          角度值（弧度）
//-------------------------------------------------------------------------------------------------------------------
float arctan1(float tan)
{ 
	float angle = (ABS(tan) > 1.0f)	? 																																								\
								90.0f - ABS(1.0f / tan) * (45.0f - (ABS(1.0f / tan) - 1.0f) * (14.0f + 3.83f * ABS(1.0f / tan)))	: \
								ABS(tan) * (45.0f - (ABS(tan) - 1.0f) * (14.0f + 3.83f * ABS(tan)));
	return (tan > 0) ? angle : -angle;
}

//-------------------------------------------------------------------------------------------------------------------
// 函 数 名:           ATan2
// 函数功能 :           反正切三角函数
// 输    入:          数值
// 输    出:          角度值（弧度）
//-------------------------------------------------------------------------------------------------------------------
float arctan2(float x, float y)
{
	float tan, angle;
	
	if (x == 0 && y == 0)		//不存在
		return 0;
	
	if (x == 0)							//y轴上
	{
		if (y > 0)
			return 90;
		else
			return -90;
	}
	
	if (y == 0)							//x轴上
	{
		if (x > 0)
			return 0;
		else 
			return -180.0f;
	}
	
	tan = y / x;
	angle = arctan1(tan);
	if (x < 0 && angle > 0)
		angle -= 180.0f;
	else if (x < 0 && angle < 0)
		angle += 180.0f;
	return angle;
}

//-------------------------------------------------------------------------------------------------------------------
// 函 数 名:           arcsin1
// 函数功能 :           反正弦三角函数
// 输    入:          数值
// 输    出:          角度值（弧度）
//-------------------------------------------------------------------------------------------------------------------
float arcsin(float i)
{
	return arctan1(i / sqrt(1 - i * i));
}

